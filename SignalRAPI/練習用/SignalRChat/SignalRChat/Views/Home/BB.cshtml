@{
    ViewBag.Title = "BB";
}
<div>
    <h4>我是张三</h4>
    <p>
        <input type="text" id="content" placeholder="" class="input" />   <input type="button" value="发送给李四" class="btn btn-sm btn-info" id="btn_send" />
    </p>

    <div>
        <h4>接收到的信息：</h4>
        <ul id="dataContainer">
        </ul>
    </div>
</div>
@section scripts {
    <!--Script references. -->
    <!--The jQuery library is required and is referenced by default in _Layout.cshtml. -->
    <!--Reference the SignalR library. -->
    <script src="~/Scripts/jquery.signalR-2.4.1.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="~/signalr/hubs"></script>
    <!--SignalR script to update the chat page and send messages.-->


        <script language="javascript">
            $(function () {
                var chat = $.connection.chatHub; //连接服务端集线器，demoHub为服务端集线器名称，js上首字母须改为小写（系统默认）
            //定义客户端方法，此客户端方法必须与服务端集线器中的方法名称、参数均一致。
            //实际上是服务端调用了前端的js方法（订阅）

            $.connection.hub.qs = {'userName': '张三' }
            chat.client.show = function (content) {
                var html = '<li>' + htmlEncode(content) + "</li>";
                $("#dataContainer").append(html);
            }

            //定义推送
            $.connection.hub.start()
                .done(function () {
                $("#btn_send").click(function () {
                    chat.server.callOne("李四", $("#content").val());  //将客户端的content内容发送到服务端
                    $("#content").val("");
                });
                });
        });
        //编码
        function htmlEncode(value) {
            var encodedValue = $('<div />').text(value).html();
            return encodedValue;
        }
    </script>
    }